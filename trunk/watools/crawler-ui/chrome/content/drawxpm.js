function writeXpm(b){var d="xpm"+(new Date).getTime();b=b;var a=0,i=/([^\n]+)\n?/;i.multiline=true;var j=0,k=0,f=0,c=0;d="<span id='"+d+"' style='vertical-align: bottom'>";if(a=b.match(i)){var g=a[1];a=b.indexOf(a[0])+a[0].length;b=b.substr(a);c=g.split(" ");j=parseInt(c[0],10);k=parseInt(c[1],10);f=parseInt(c[2],10);c=parseInt(c[3],10);for(var l=Array(f),e=0;e<f;)if(a=b.match(i)){g=a[1];a=b.indexOf(a[0])+a[0].length;b=b.substr(a);a=g.substring(0,c);var h=g.substring(c+1+2);if(h=="None"||h=="none")h= "transparent";l[a]=h;e+=1}else return;f=0;for(d+="<table cellPadding='0' style='border: 0px; padding: 0px; border-spacing: 0px; display: inline-table;'>";f<k;)if(a=b.match(i)){g=a[1];a=b.indexOf(a[0])+a[0].length;b=b.substr(a);d+="<tr style='padding: 0px; border-spacing: 0px; border: 0px;'>";for(e=0;e<j;e++){a=g.substring(e*c,(e+1)*c);h=l[a];d+="<td style='background: "+h+"; width: 1px; height: 1px;'></td>"}f+=1;d+="</tr>"}else return;d+="</table>";d+="</span>";return d}};